{"version":3,"sources":["webpack:///./templates/category-list.hbs","webpack:///./scripts/storage.js","webpack:///./scripts/main.js","webpack:///./scripts/pnotify.js","webpack:///./scripts/fetchMe.js","webpack:///./index.js","webpack:///./scripts/addCardLogic.js","webpack:///./scripts/addAndEditCardLogic.js","webpack:///./templates/add.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","escapeExpression","lambda","stack1","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","nullContext","program","noop","load","key","serializedState","localStorage","getItem","undefined","JSON","parse","err","console","error","save","value","stringify","setItem","remove","removeItem","decideTologin","param","user","document","body","querySelector","classList","add","fav","favourites","Array","isArray","map","el","i","length","_id","liked","keys","defaults","styling","icons","hide","stack","fetchFunctions","this","URL","_token","accessToken","refreshToken","sid","points","reg","login","logout","refresh","google","myFav","myCalls","find","cat","catCalls","getRequest","point","response","ok","token","pushError","message","opt","then","method","query","contentType","headers","accept","authorization","params","url","sendRequest","fetch","status","newResponse","json","log","option","insertAdjacentHTML","addCard","addEventListener","e","preventDefault","formElements","currentTarget","elements","title","description","category","price","phone","fileUrl","file","files","name","fileType","type","formData","Number","cardToAdd","addNewCard","refs","photoElem","outputImg","querySelectorAll","openCatListEl","categoryList","addCardForm","photoLabel","formInputs","errorMessage","event","reader","FileReader","onload","src","result","photoLabelList","readAsDataURL","target","request","catMarkup","getCategoryList","once","formInputList","from","forEach","input","currentIndex","indexOf","errorsMessageList","trim","innerHTML","modalLogic"],"mappings":"uGAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,MAAO,sBACLJ,EAAUK,iBAAiBL,EAAUM,OAAOL,EAAQA,IACpD,UACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASD,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIG,EAON,MAAO,kCACqR,OAAtRA,GARyBP,EAAUQ,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAMQR,EAAQ,QAAQY,KAAe,MAAVb,EAAiBA,EAAUD,EAAUe,aAAe,GAAId,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUgB,QAAQ,EAAGZ,EAAM,GAAG,QAAUJ,EAAUiB,KAAK,KAAOb,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,EAAE,OAAS,QAAkBG,EAAS,IACxS,eACJ,SAAU,K,4JChBNW,G,UAAO,SAAAC,GACX,IACE,IAAMC,EAAkBC,aAAaC,QAAQH,GAE7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,GACzD,MAAOM,GACPC,QAAQC,MAAM,oBAAqBF,MAKjCG,EAAO,SAACV,EAAKW,GACjB,IACE,IAAMV,EAAkBI,KAAKO,UAAUD,GACvCT,aAAaW,QAAQb,EAAKC,GAC1B,MAAOM,GACPC,QAAQC,MAAM,oBAAqBF,KAKjCO,EAAS,SAAAd,GACb,IACEE,aAAaa,WAAWf,GACxB,MAAOO,GACPC,QAAQC,MAAM,uBAAwBF,K,wWClB3B,SAAeS,EAA9B,kC,iDAAe,WAA6BC,GAA7B,6FACTC,EAAOnB,EAAK,SAASmB,MADZ,mBAGXC,SAASC,KACNC,cAAc,sBACdC,UAAUC,IAAI,eACbN,EANO,iDAOT,IAAMO,EAAMN,EAAKO,WACjB,GAAIC,MAAMC,QAAQV,GAChBA,EAAMW,KAAI,SAAAC,GACR,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAIO,OAAQD,IAC1BD,EAAGG,KAAOR,EAAIM,GAAGE,MACnBH,EAAGI,MAAQ,iBAKjB,IAAK,IAAIC,KAAQjB,EACfA,EAAMiB,GAAMN,KAAI,SAAAC,GACd,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAIO,OAAQD,IAC1BD,EAAGG,KAAOR,EAAIM,GAAGE,MACnBH,EAAGI,MAAQ,YAOrB,SAAOhB,GA5BE,yDA+BbE,SAASC,KACNC,cAAc,sBACdC,UAAUR,OAAO,cAjCP,4C,wfCJfqB,WAASC,QAAU,WACnBD,WAASE,MAAQ,WACjBF,WAASG,MAAO,EAChBH,WAASrB,QAAS,SACXqB,WAASI,M,ICmIDC,EADQ,I,WArIrB,aACEC,KAAKC,IAAM,0CACXD,KAAKE,OAAS,CACZC,YAAa,GACbC,aAAc,GACdC,IAAK,IAEPL,KAAKM,OAAS,CACZC,IAAK,kBACLC,MAAO,eACPC,OAAQ,gBACRC,QAAS,iBACTC,OAAQ,gBACRlC,KAAM,SACNvB,KAAM,SACN6B,IAAK,mBACL6B,MAAO,oBACPC,QAAS,aACTC,KAAM,qBACNC,IAAK,mBACLC,SAAU,mB,iCAmBRP,O,4CAAN,mHACyBT,KAAKiB,WAAW,CAAEC,OAAO,IADlD,YACQC,EADR,QAEeC,GAFf,wBAGI/C,EAAO,SACP2B,KAAKqB,MAAQ,CACXlB,YAAa,GACbC,aAAc,GACdC,IAAK,IAEP9B,IATJ,SAUiB4C,EAVjB,gDAYEG,UAAUH,EAASI,SAZrB,iD,uDAcMf,M,4CAAN,WAAYgB,GAAZ,2GACexB,KAAKiB,WAAWO,GAAKC,MAAK,SAAAjF,GAIrC,OAHA,EAAK6E,MAAQ7E,EACbyB,EAAK,QAASzB,GACd+B,IACO/B,KALX,wF,wDAQMyE,W,4CAAN,iIACEC,EADF,EACEA,MADF,IAEEQ,cAFF,MAEW,MAFX,MAGE/C,YAHF,MAGS,KAHT,MAIEgD,aAJF,MAIU,GAJV,MAKEC,mBALF,SAOQJ,EAAM,CACVE,SACAG,QAAS7B,KAAK6B,SAEZD,IACFJ,EAAIK,QAAU,CACZC,OAAQ,mBACR,eAAgB,sBAChBC,cAAezE,EAAK,SAAL,UACDA,EAAK,SAAS6C,YACxB,KAGJxB,IAAM6C,EAAI7C,KAAOf,KAAKO,UAAUQ,IAC9BqD,IAASd,GAAQM,EACjBS,EAAMjC,KAAKC,IAAMiB,EAAQS,EAtBjC,SAuBe3B,KAAKkC,YAAYD,EAAKD,GAvBrC,wF,wDAyBME,Y,4CAAN,WAAkBD,EAAKD,GAAvB,sGAESA,EAFT,gCAG6BG,MAAMnC,KAAKC,IAAMD,KAAKM,OAAOG,OAAQ,CAC1DiB,OAAQ,OACRG,QAAS,CAAEC,OAAQ,MAAOC,cAAe/B,KAAK6B,QAAQE,iBAL9D,cAGYZ,EAHZ,yBAOaA,GAPb,uBAS2BgB,MAAMF,EAAKD,GATtC,UAU4B,OADlBb,EATV,QAUiBiB,OAVjB,kCAWgCpC,KAAKU,QAAQuB,EAAKD,GAXlD,eAWYK,EAXZ,iBAYmBA,EAAYC,OAZ/B,oDAagBnB,EAASC,GAbzB,kCAcYD,EAASmB,OAAOb,MAAK,SAAAjF,GAAI,OAAI8E,UAAU9E,EAAK+E,YAdxD,2DAkBiBJ,EAASmB,OAlB1B,2EAoBIvE,QAAQwE,IAAI,UAAW,KAAIhB,SApB/B,0D,0DAwBMb,Q,4CAAN,WAAcuB,EAAKT,GAAnB,oGACQgB,EAAS,CACbd,OAAQ,OACRG,QAAS,CACP,eAAgB,mBAChBE,cAAe,UAAUzE,EAAK,SAAS8C,cAEzCzB,KAAMf,KAAKO,UAAU,CAAEkC,IAAK/C,EAAK,SAAS+C,OAP9C,kBAU2B8B,MAAMnC,KAAKC,IAAMD,KAAKM,OAAOI,QAAS8B,GAVjE,iBAWaF,OAAOb,MAAK,SAAAjF,GACnB,EAAK6E,MAAQ7E,EACbyB,EAAK,QAAS,EAAKoD,WAGjBY,EAhBR,iCAgB0BjC,KAAKkC,YAAYD,EAAKT,GAhBhD,kGAkBIzD,QAAQwE,IAAI,YAAa,KAAIhB,SAlBjC,0D,8FAtFE,MAAO,CACL,eAAgB,mBAChBQ,cAAezE,EAAK,SAAL,UAA0BA,EAAK,SAAS6C,YAAgB,M,4BAIzE,OAAOH,KAAKE,Q,aAEJmB,GACR,IAAIhC,EAAI,EACR,IAAK,IAAI9B,KAAO8D,EACdrB,KAAKE,OAAOnD,OAAO0C,KAAK4B,GAAOhC,IAAMgC,EAAMtE,OAAO0C,KAAK4B,GAAOhC,IAC9DA,GAAK,O,8uBChCMX,SAASE,cAAc,QAC/B6D,mBAAmB,aAAcC,OCGlBhE,SAASE,cAAc,mBAC/B+D,iBAAiB,UAE7B,SAAsBC,GAClBA,EAAEC,iBAEF,IAAMC,EAAeF,EAAEG,cAAcC,SAC/BC,EAAQH,EAAaG,MAAM/E,MAC3BgF,EAAcJ,EAAaI,YAAYhF,MACvCiF,EAAWL,EAAaK,SAASjF,MACjCkF,EAAQN,EAAaM,MAAMlF,MAC3BmF,EAAQP,EAAaO,MAAMnF,MAC3BoF,EAAUR,EAAaS,KAAKC,MAAM,GAAGC,KACrCC,EAAWZ,EAAaS,KAAKC,MAAM,GAAGG,KAEtCC,EAAW,CACbX,QACAC,cACAC,WACAC,MAAOS,OAAOT,GACdC,QACAE,KAASD,EAAL,UAAsBI,GAG9B3F,QAAQwE,IAAIqB,GAEZ,IAAME,EAAY,CACd5C,MAAOnB,EAAeO,OAAOpD,KAC7ByB,KAAMiF,EACNlC,OAAQ,OACRE,aAAa,GA3BI,iDA+BrB,mHACyB7B,EAAekB,WAAW6C,GADnD,OACQ3C,EADR,OAEIpD,QAAQwE,IAAIpB,GAFhB,4CA/BqB,0DAoCrB4C,MCjDO,WACX,IAAMC,EAAO,CACTC,UAAWvF,SAASE,cAAc,cAClCsF,UAAWxF,SAASyF,iBAAiB,iBACrCC,cAAe1F,SAASE,cAAc,iBACtCyF,aAAc3F,SAASE,cAAc,kBACrC0F,YAAa5F,SAASE,cAAc,mBACpC2F,WAAY7F,SAASyF,iBAAiB,gBACtCK,WAAY9F,SAASyF,iBAAiB,oBACtCM,aAAc/F,SAASyF,iBAAiB,mBAGxC9E,GAAK,EAET2E,EAAKC,UAAUtB,iBAAiB,UAQhC,SAAsB+B,GAClB,IAAMC,EAAS,IAAIC,WACnBvF,GAAK,EACLsF,EAAOE,OAAS,WACRxF,EAAI2E,EAAKE,UAAU5E,OAAQ,IAC3B0E,EAAKE,UAAU7E,GAAGyF,IAAMH,EAAOI,OACnCC,EAAe3F,GAAGR,UAAUR,OAAO,UACnC2F,EAAKO,WAAWlF,EAAE,GAAGR,UAAUC,IAAI,WAEnCkF,EAAKE,UAAU7E,GAAGyF,IAAMH,EAAOI,OAC/BC,EAAe3F,GAAGR,UAAUR,OAAO,WAGvCsG,EAAOM,cAAcP,EAAMQ,OAAO1B,MAAM,OApB5CQ,EAAKI,cAAczB,iBAAiB,SAuBpC,SAAwBC,GACpB,IAAMuC,EAAU,CACZjE,MAAOnB,EAAeO,OAAOS,KAFV,iDAKvB,qHACyBhB,EAAekB,WAAWkE,GADnD,OACQhE,EADR,OAEU4D,EAASK,IAAUjE,GACzB6C,EAAKK,aAAa5B,mBAAmB,aAAcsC,GAHvD,4CALuB,0DAUvBM,KAjCyD,CAC3DC,MAAM,IAGR,IAmCUC,EAnCJP,EAAiB/F,MAAMuG,KAAKxB,EAAKO,YACvCS,EAAe,GAAGnG,UAAUC,IAAI,WAkCtByG,EAAgBtG,MAAMuG,KAAKxB,EAAKQ,aACxBiB,SAAQ,SAAAC,GAClBA,EAAM/C,iBAAiB,QAAQ,SAAC+B,GAC5B,IAAMiB,EAAeJ,EAAcK,QAAQlB,EAAM3B,eACvC8C,EAAoB5G,MAAMuG,KAAKxB,EAAKS,cACnB,KAAvBiB,EAAMxH,MAAM4H,QACZJ,EAAM7G,UAAUC,IAAI,WAEpB+G,EAAkBF,GAAcI,UAAY,gCAE5CL,EAAM7G,UAAUR,OAAO,WACvBwH,EAAkBF,GAAc9G,UAAUC,IAAI,0BFvDlEkH,I,qBGbA,IAAIhK,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,MAAO,0jKACT,SAAU,M","file":"main.1a01f972ff2b6faf8ee1.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"    <option value=\\\"\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"\\\">\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<datalist id=\\\"categories\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":4},\"end\":{\"line\":4,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"</datalist>\";\n},\"useData\":true});","// Принимает ключ `key` по которому будет произведена выборка.\r\nconst load = key => {\r\n  try {\r\n    const serializedState = localStorage.getItem(key);\r\n\r\n    return serializedState === null ? undefined : JSON.parse(serializedState);\r\n  } catch (err) {\r\n    console.error('Get state error: ', err);\r\n  }\r\n};\r\n\r\n// Принимает ключ `key` и значение `value`.\r\nconst save = (key, value) => {\r\n  try {\r\n    const serializedState = JSON.stringify(value);\r\n    localStorage.setItem(key, serializedState);\r\n  } catch (err) {\r\n    console.error('Set state error: ', err);\r\n  }\r\n};\r\n\r\n// Удаляет пару по ключу `key`.\r\nconst remove = key => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (err) {\r\n    console.error('Remove state error: ', err);\r\n  }\r\n};\r\n\r\nexport { load, save, remove };\r\n","import { load, save, remove } from './storage';\r\nimport { pushError, removeError } from './pnotify';\r\nimport fetchFunctions from './fetchMe';\r\n// import myModal from './modalClass';\r\n\r\n// myModal.startListener();\r\n// decideTologin();\r\n\r\nexport default async function decideTologin(param) {\r\n  let user = load('Token').user;\r\n  if (user) {\r\n    document.body\r\n      .querySelector('main div.container')\r\n      .classList.add('authorized');\r\n    if (param) {\r\n      const fav = user.favourites;\r\n      if (Array.isArray(param)) {\r\n        param.map(el => {\r\n          for (let i = 0; i < fav.length; i++) {\r\n            if (el._id == fav[i]._id) {\r\n              el.liked = 'liked';\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        for (let keys in param) {\r\n          param[keys].map(el => {\r\n            for (let i = 0; i < fav.length; i++) {\r\n              if (el._id == fav[i]._id) {\r\n                el.liked = 'liked';\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      return param;\r\n    }\r\n  }\r\n  document.body\r\n    .querySelector('main div.container')\r\n    .classList.remove('authorized');\r\n}\r\n","import { error, defaults } from '@pnotify/core';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/Material.css';\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\ndefaults.styling = 'material';\r\ndefaults.icons = 'material';\r\ndefaults.hide = false;\r\ndefaults.remove = false;\r\ndelete defaults.stack;\r\n\r\nfunction pushError(err) {\r\n  error({\r\n    text: `${err}`,\r\n    type: 'error',\r\n    addClass: 'error',\r\n  });\r\n  setTimeout(() => {\r\n    removeError();\r\n  }, 5000);\r\n}\r\n\r\nfunction removeError() {\r\n  const errorRef = document.querySelector('.error');\r\n  if (errorRef) errorRef.remove();\r\n}\r\n\r\nexport { pushError, removeError };\r\n","import { load, save, remove } from './storage';\r\n// import { pushError } from './pnotify';\r\nimport decideTologin from './main';\r\n\r\nclass FetchMe {\r\n  constructor() {\r\n    this.URL = 'https://callboard-backend.herokuapp.com';\r\n    this._token = {\r\n      accessToken: '',\r\n      refreshToken: '',\r\n      sid: '',\r\n    };\r\n    this.points = {\r\n      reg: '/auth/register/',\r\n      login: '/auth/login/',\r\n      logout: '/auth/logout/',\r\n      refresh: '/auth/refresh/',\r\n      google: '/auth/google/',\r\n      user: '/user/',\r\n      call: '/call/',\r\n      fav: '/call/favourite/',\r\n      myFav: '/call/favourites/',\r\n      myCalls: '/call/own/',\r\n      find: '/call/find?search=',\r\n      cat: '/call/categories',\r\n      catCalls: '/call/specific/',\r\n    };\r\n  }\r\n  get headers() {\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      authorization: load('Token') ? `Bearer ${load('Token').accessToken}` : '',\r\n    };\r\n  }\r\n  get token() {\r\n    return this._token;\r\n  }\r\n  set token(token) {\r\n    let i = 0;\r\n    for (let key in token) {\r\n      this._token[Object.keys(token)[i]] = token[Object.keys(token)[i]];\r\n      i += 1;\r\n    }\r\n  }\r\n  async logout() {\r\n    const response = await this.getRequest({ point: false });\r\n    if (response.ok) {\r\n      remove('Token');\r\n      this.token = {\r\n        accessToken: '',\r\n        refreshToken: '',\r\n        sid: '',\r\n      };\r\n      decideTologin();\r\n      return await response;\r\n    }\r\n    pushError(response.message);\r\n  }\r\n  async login(opt) {\r\n    return await this.getRequest(opt).then(data => {\r\n      this.token = data;\r\n      save('Token', data);\r\n      decideTologin();\r\n      return data;\r\n    });\r\n  }\r\n  async getRequest({\r\n    point,\r\n    method = 'GET',\r\n    body = null,\r\n    query = '',\r\n    contentType = false,\r\n  }) {\r\n    const opt = {\r\n      method,\r\n      headers: this.headers,\r\n    };\r\n    if (contentType) {\r\n      opt.headers = {\r\n        accept: 'application/json',\r\n        'Content-Type': 'multipart/form-data',\r\n        authorization: load('Token')\r\n          ? `Bearer ${load('Token').accessToken}`\r\n          : '',\r\n      };\r\n    }\r\n    if (body) opt.body = JSON.stringify(body);\r\n    const params = point ? opt : false;\r\n    const url = this.URL + point + query;\r\n    return await this.sendRequest(url, params);\r\n  }\r\n  async sendRequest(url, params) {\r\n    try {\r\n      if (!params) {\r\n        const response = await fetch(this.URL + this.points.logout, {\r\n          method: 'POST',\r\n          headers: { accept: '*/*', authorization: this.headers.authorization },\r\n        });\r\n        return response;\r\n      }\r\n      const response = await fetch(url, params);\r\n      if (response.status === 401) {\r\n        const newResponse = await this.refresh(url, params);\r\n        return await newResponse.json();\r\n      } else if (!response.ok) {\r\n        await response.json().then(data => pushError(data.message));\r\n        return;\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (err) {\r\n      console.log('mistake', err.message);\r\n    }\r\n  }\r\n\r\n  async refresh(url, opt) {\r\n    const option = {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${load('Token').refreshToken}`,\r\n      },\r\n      body: JSON.stringify({ sid: load('Token').sid }),\r\n    };\r\n    try {\r\n      const response = await fetch(this.URL + this.points.refresh, option);\r\n      response.json().then(data => {\r\n        this.token = data;\r\n        save('Token', this.token);\r\n        // decideTologin();\r\n      });\r\n      if (url) return await this.sendRequest(url, opt);\r\n    } catch (err) {\r\n      console.log('mistake 2', err.message);\r\n    }\r\n  }\r\n}\r\n\r\nconst fetchFunctions = new FetchMe();\r\nexport default fetchFunctions;\r\n","import './sass/main.scss';\nimport 'material-design-icons/iconfont/material-icons.css';\n// import './addCardLogic';\n// import './scripts/main';\nimport addLogic from './scripts/addCardLogic';\nimport modalLogic from './scripts/addAndEditCardLogic';\nimport addCard from './templates/add.hbs';\nimport fetchFunctions from './scripts/fetchMe';\n\nconst mainPage = document.querySelector('body');\nmainPage.insertAdjacentHTML('afterbegin', addCard());\n\naddLogic();\nmodalLogic();\n\n// const logInfo = {\n//   email: 'titoff.roma@gmail.com',\n//   password: 'qweqwe12',\n// };\n// const request = {\n//   point: fetchFunctions.points.login,\n//   body: logInfo,\n//   method: 'POST',\n//   //query: '1'\n// };\n// (async () => {\n//   await fetchFunctions.login(request);\n//   const newRequest = {\n//     point: fetchFunctions.points.user,\n//   };\n//   const response = await fetchFunctions.getRequest(newRequest);\n//   console.log('get user - authorized -', response);\n// })();\n","import addCardModal from '../templates/add.hbs'\r\nimport fetchFunctions from './fetchMe';\r\n// import './addAndEditCardLogic';\r\n\r\n// export default function openAddCardModal() {\r\n//   const markup = addCardModal();\r\n//   document.body.addEventListener('submit', onOpenAddCardModal);\r\n//   return markup;\r\n// }\r\n\r\nexport default function onOpenAddCardModal() {\r\n    // modalLogic();\r\n    \r\n    const addCardForm = document.querySelector('.add-card__form');\r\n    addCardForm.addEventListener('submit', onFormSubmit);\r\n\r\n    function onFormSubmit(e) {\r\n        e.preventDefault();\r\n \r\n        const formElements = e.currentTarget.elements;\r\n        const title = formElements.title.value;\r\n        const description = formElements.description.value;\r\n        const category = formElements.category.value;\r\n        const price = formElements.price.value;\r\n        const phone = formElements.phone.value;\r\n        const fileUrl = formElements.file.files[0].name;\r\n        const fileType = formElements.file.files[0].type;\r\n\r\n        const formData = {\r\n            title,\r\n            description,\r\n            category,\r\n            price: Number(price),\r\n            phone,\r\n            file: `${fileUrl}; type=${fileType}`,\r\n        };\r\n\r\n        console.log(formData);\r\n\r\n        const cardToAdd = {\r\n            point: fetchFunctions.points.call,\r\n            body: formData,\r\n            method: 'POST',\r\n            contentType: true,\r\n        }\r\n\r\n\r\n        async function addNewCard() {\r\n            let response = await fetchFunctions.getRequest(cardToAdd);\r\n            console.log(response);\r\n        }\r\n        \r\n        addNewCard(); \r\n    }\r\n   \r\n}\r\n\r\n","import catMarkup from '../templates/category-list.hbs';\r\nimport fetchFunctions from './fetchMe';\r\n\r\nexport default function () {\r\n    const refs = {\r\n        photoElem: document.querySelector('#photoElem'),\r\n        outputImg: document.querySelectorAll('#output_image'),\r\n        openCatListEl: document.querySelector('.select-field'),\r\n        categoryList: document.querySelector('.category-list'),\r\n        addCardForm: document.querySelector('.add-card__form'),\r\n        photoLabel: document.querySelectorAll('.photo-label'),\r\n        formInputs: document.querySelectorAll('.add-card__input'),\r\n        errorMessage: document.querySelectorAll('.error-message')\r\n    }\r\n\r\n    let i = -1;\r\n\r\n    refs.photoElem.addEventListener('change', previewImage);\r\n    refs.openCatListEl.addEventListener('click', categoryRender, {\r\n      once: true,\r\n    });\r\n\r\n    const photoLabelList = Array.from(refs.photoLabel);\r\n    photoLabelList[0].classList.add('active');\r\n\r\n    function previewImage(event) {\r\n        const reader = new FileReader();\r\n        i += 1;\r\n        reader.onload = function () {\r\n            if (i < refs.outputImg.length -1) {\r\n                refs.outputImg[i].src = reader.result;\r\n            photoLabelList[i].classList.remove('active');\r\n            refs.photoLabel[i+1].classList.add('active');\r\n            }\r\n            refs.outputImg[i].src = reader.result;\r\n            photoLabelList[i].classList.remove('active');\r\n        }\r\n\r\n        reader.readAsDataURL(event.target.files[0]);  \r\n    }\r\n\r\n    function categoryRender(e) {\r\n        const request = {\r\n            point: fetchFunctions.points.cat,\r\n        };\r\n\r\n        async function getCategoryList() {\r\n            let response = await fetchFunctions.getRequest(request);\r\n            const result = catMarkup(response);\r\n            refs.categoryList.insertAdjacentHTML('afterbegin', result); \r\n        };\r\n        getCategoryList(); \r\n    }\r\n\r\n\r\n\r\n    function validateInput() {\r\n        const formInputList = Array.from(refs.formInputs);\r\n        formInputList.forEach(input => {\r\n            input.addEventListener('blur', (event) => {\r\n                const currentIndex = formInputList.indexOf(event.currentTarget);\r\n                    const errorsMessageList = Array.from(refs.errorMessage);\r\n                if (input.value.trim() === '') {\r\n                    input.classList.add('invalid');\r\n                    \r\n                    errorsMessageList[currentIndex].innerHTML = 'Заповніть будьласка це поле';\r\n                } else {\r\n                    input.classList.remove('invalid');\r\n                    errorsMessageList[currentIndex].classList.add('visually-hidden')\r\n                } \r\n            })\r\n        })\r\n    }\r\n    \r\n    validateInput();\r\n}\r\n\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"backdrop\\\" data-close>\\r\\n    <div class=\\\"add-card__modal\\\">\\r\\n        <button class=\\\"icon-btn\\\">\\r\\n            <span class=\\\"material-icons\\\" data-close>clear</span>\\r\\n        </button>\\r\\n        <p class=\\\"add-card__title\\\">Додати оголошення</p>\\r\\n        <form class=\\\"add-card__form\\\">\\r\\n            <ul class=\\\"add-card__fields\\\">\\r\\n                <li class=\\\"add-card__item\\\">\\r\\n                    <label class=\\\"add-card__label\\\">\\r\\n                        <span class=\\\"add-card__subtitle\\\">Назва товару</span>\\r\\n                        <input class=\\\"add-card__input\\\" type=\\\"text\\\" name=\\\"title\\\" required />\\r\\n                    </label>\\r\\n                    <p class=\\\"error-message\\\"></p>\\r\\n                </li>\\r\\n                <li class=\\\"add-card__item\\\">\\r\\n                    <label class=\\\"add-card__label\\\">\\r\\n                        <span class=\\\"add-card__subtitle\\\">Фото</span>\\r\\n                        <ul class=\\\"photo-list\\\">\\r\\n                            <li class=\\\"photo-item\\\">\\r\\n                                <input id=\\\"photoElem\\\" class=\\\"photo-input\\\" type=\\\"file\\\" name=\\\"file\\\" multiple\\r\\n                                    accept=\\\"image/*\\\" required />\\r\\n                                <label for=\\\"photoElem\\\" class=\\\"photo-label\\\"><span\\r\\n                                        class=\\\"material-icons\\\">add</span></label>\\r\\n                                <img id=\\\"output_image\\\" />\\r\\n                            </li>\\r\\n                            <li class=\\\"photo-item\\\">\\r\\n                                <label for=\\\"photoElem\\\" class=\\\"photo-label\\\"><span\\r\\n                                        class=\\\"material-icons\\\">add</span></label>\\r\\n                                <img id=\\\"output_image\\\" />\\r\\n                            </li>\\r\\n                            <li class=\\\"photo-item\\\">\\r\\n                                <label for=\\\"photoElem\\\" class=\\\"photo-label\\\"><span\\r\\n                                        class=\\\"material-icons\\\">add</span></label>\\r\\n                                <img id=\\\"output_image\\\" />\\r\\n                            </li>\\r\\n                            <li class=\\\"photo-item\\\">\\r\\n                                <label for=\\\"photoElem\\\" class=\\\"photo-label\\\"><span\\r\\n                                        class=\\\"material-icons\\\">add</span></label>\\r\\n                                <img id=\\\"output_image\\\" />\\r\\n                            </li>\\r\\n                            <li class=\\\"photo-item\\\">\\r\\n                                <label for=\\\"photoElem\\\" class=\\\"photo-label\\\"><span\\r\\n                                        class=\\\"material-icons\\\">add</span></label>\\r\\n                                <img id=\\\"output_image\\\" />\\r\\n                            </li>\\r\\n                        </ul>\\r\\n                    </label>\\r\\n                </li>\\r\\n                <li class=\\\"add-card__item\\\">\\r\\n                    <label class=\\\"add-card__label\\\">\\r\\n                        <span class=\\\"add-card__subtitle\\\">Опис товару</span>\\r\\n                        <textarea rows=\\\"3\\\" class=\\\"add-card__input description\\\" name=\\\"description\\\" required></textarea>\\r\\n                    </label>\\r\\n                    <p class=\\\"error-message\\\"></p>\\r\\n                </li>\\r\\n                <li class=\\\"add-card__item\\\">\\r\\n                    <label class=\\\"add-card__label notice select-field\\\">\\r\\n                        <span class=\\\"add-card__subtitle\\\">Категорія товару</span>\\r\\n                        <input list=\\\"categories\\\" class=\\\"add-card__input select-input\\\" type=\\\"text\\\" name=\\\"category\\\"\\r\\n                            required />\\r\\n                        <div class=\\\"category-list\\\"></div>\\r\\n                        <button class=\\\"icon-btn open-category\\\" type=\\\"button\\\">\\r\\n                            <span class=\\\"material-icons open-btn\\\" width=\\\"10px\\\" height=\\\"5px\\\">arrow_drop_down</span>\\r\\n                        </button>\\r\\n                    </label>\\r\\n                    <p class=\\\"error-message\\\"></p>\\r\\n                </li>\\r\\n                <li class=\\\"add-card__item\\\">\\r\\n                    <label class=\\\"add-card__label notice\\\">\\r\\n                        <span class=\\\"add-card__subtitle\\\">Ціна</span>\\r\\n                        <input class=\\\"add-card__input\\\" type=\\\"number\\\" name=\\\"price\\\" placeholder=\\\" \\\" required />\\r\\n                        <span class=\\\"notice-label\\\">0.00</span>\\r\\n                        <span class=\\\"price-valuta\\\">грн</span>\\r\\n                    </label>\\r\\n                    <p class=\\\"error-message\\\"></p>\\r\\n                </li>\\r\\n                <li class=\\\"add-card__item\\\">\\r\\n                    <label class=\\\"add-card__label notice\\\">\\r\\n                        <span class=\\\"add-card__subtitle\\\">Телефон</span>\\r\\n                        <input class=\\\"add-card__input\\\" type=\\\"tel\\\" name=\\\"phone\\\" placeholder=\\\" \\\" required />\\r\\n                        <span class=\\\"notice-label\\\">+38 (0--) --- -- --</span>\\r\\n                    </label>\\r\\n                    <p class=\\\"error-message\\\"></p>\\r\\n                </li>\\r\\n            </ul>\\r\\n            <button class=\\\"submit-btn\\\" type=\\\"submit\\\">Додати</button>\\r\\n        </form>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}